<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Confirm Replace</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
      <div class="container mt-5">
        <h1>Replace Existing Articles</h1>
        <p>The following articles already exist. Do you want to replace them with the new ones?</p>

        <form method="POST">
            {% for item in replace_articles %}
                <div class="card mb-4">
                    <div class="card-header">
                        <h3>Article with URL: {{ item.new.url }}</h3>
                    </div>
                    <div class="card-body">
                        <table class="table table-bordered">
                            <thead>
                                <tr>
                                    <th>Field</th>
                                    <th>Existing Article</th>
                                    <th>New Article</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Title</td>
                                    <td>{{ item.old.title }}</td>
                                    <td>{{ item.new.title }}</td>
                                </tr>
                                <tr>
                                    <td>Author</td>
                                    <td>{{ item.old.author }}</td>
                                    <td>{{ item.new.author }}</td>
                                </tr>
                                <tr>
                                    <td>Date</td>
                                    <td>{{ item.old.date }}</td>
                                    <td>{{ item.new.date }}</td>
                                </tr>
                                <tr>
                                    <td>Summary</td>
                                    <td>{{ item.old.summary }}</td>
                                    <td>{{ item.new.summary }}</td>
                                </tr>
                                <tr>
                                    <td>Tags</td>
                                    <td>{{ item.old.tags }}</td>
                                    <td>{{ item.new.tags }}</td>
                                </tr>
                                <tr>
                                    <td>Sentiment</td>
                                    <td>{{ item.old.senti_label }}</td>
                                    <td>{{ item.new.senti_label }}</td>
                                </tr>
                                <tr>
                                    <td>Score</td>
                                    <td>{{ item.old.senti_score }}</td>
                                    <td>{{ item.new.senti_score }}</td>
                                </tr>
                                <tr>
                                    <td>Folder</td>
                                    <td>{{ item.old.folder['name'] }}</td>
                                    <td>{{ item.new_folder_name }}</td>
                                </tr>
                            </tbody>
                        </table>
                        <div class="form-group">
                            <button type="submit" name="confirm_{{ loop.index0 }}" class="btn btn-danger">Replace</button>
                            <button type="submit" name="skip_{{ loop.index0 }}" class="btn btn-secondary">Cancel</button>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </form>
    </div>
</body>
</html>
